# Generate HLS code
## Stencil
```
sodac stencil.soda --xocl-kernel stencil_kernel.cpp
```
failed:     
RecursionError: maximum recursion depth exceeded        

## Generate HLS code from SODA code
```
sodac ${app}.soda --xocl-kernel ${app}_kernel.cpp
```

## Run HLS code
```
source with-sdaccel  # Set environment
platform=xilinx_u200_qdma_201910_1
app=blur #blur is the name of program to be runned
kernel_name=default_function # if hls cpp file is generated by SODA, kernal_name will be default_function

xocc -t hw -f ${platform} --kernel ${kernel_name}_kernel --xp prop:kernel.${kernal_name}_kernel.kernel_flags="-std=c++0x" -c ${app}_kernel.cpp -o ${app}.hw.xo -s

```
Then find the .rpt file to see the resource & performance information     

# Use Merlin backend
1. Log on AWS instance (Mobaxterm worked) VSCode(?)
2. Set up environment: source init_env.sh
include:
```
cd $AWS_FPGA_REPO_DIR
source sdaccel_setup.sh
# Get license and set up env for docker...
```
3. Use merlin backend
cd merlin-examples/vec_add/build
make # see all the command available
make mcc_estimate # generate vivado hls report



see at: https://github.com/aws/aws-fpga/tree/master/SDAccel


Update Soda Compiler:

~blaok/git/soda-internal/src/sodac


pengzhang@falcon-computing.com